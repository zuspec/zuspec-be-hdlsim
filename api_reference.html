<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>API Reference &#8212; Zuspec Backend HDLSim  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Examples" href="examples.html" />
    <link rel="prev" title="DV Flow Manager Integration" href="dfm_integration.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="api-reference">
<h1>API Reference<a class="headerlink" href="#api-reference" title="Link to this heading">¶</a></h1>
<section id="core-modules">
<h2>Core Modules<a class="headerlink" href="#core-modules" title="Link to this heading">¶</a></h2>
<section id="zuspec-be-hdlsim">
<h3>zuspec.be.hdlsim<a class="headerlink" href="#zuspec-be-hdlsim" title="Link to this heading">¶</a></h3>
<p>Main module providing runtime integration.</p>
<dl class="py class">
<dt class="sig sig-object py" id="HDLSimRuntime">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">HDLSimRuntime</span></span><a class="headerlink" href="#HDLSimRuntime" title="Link to this definition">¶</a></dt>
<dd><p>Singleton runtime that manages testbench registration and factory configuration.</p>
<dl class="py method">
<dt class="sig sig-object py" id="HDLSimRuntime.get_instance">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_instance</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#HDLSimRuntime" title="HDLSimRuntime"><span class="pre">HDLSimRuntime</span></a></span></span><a class="headerlink" href="#HDLSimRuntime.get_instance" title="Link to this definition">¶</a></dt>
<dd><p>Get or create the singleton runtime instance.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="HDLSimRuntime.register_tb_class">
<span class="sig-name descname"><span class="pre">register_tb_class</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tb_class</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#HDLSimRuntime.register_tb_class" title="Link to this definition">¶</a></dt>
<dd><p>Register a testbench class for this simulation. Called by generated SV.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>tb_class</strong> – Top-level testbench component class</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="HDLSimRuntime.get_registered_tb_class">
<span class="sig-name descname"><span class="pre">get_registered_tb_class</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Type</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#HDLSimRuntime.get_registered_tb_class" title="Link to this definition">¶</a></dt>
<dd><p>Get the currently registered testbench class.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Registered testbench class or None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="configure_objfactory">
<span class="sig-name descname"><span class="pre">configure_objfactory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tb_class_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#configure_objfactory" title="Link to this definition">¶</a></dt>
<dd><p>Configure ObjFactory from SystemVerilog before launching pytest.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>tb_class_path</strong> – Fully qualified class path (e.g., “mymodule.MyTB”)</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="zuspec-be-hdlsim-sv-generator">
<h3>zuspec.be.hdlsim.sv_generator<a class="headerlink" href="#zuspec-be-hdlsim-sv-generator" title="Link to this heading">¶</a></h3>
<p>SystemVerilog code generation.</p>
<dl class="py class">
<dt class="sig sig-object py" id="SVTestbenchGenerator">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">SVTestbenchGenerator</span></span><a class="headerlink" href="#SVTestbenchGenerator" title="Link to this definition">¶</a></dt>
<dd><p>Generates SystemVerilog testbench from Zuspec component class.</p>
<dl class="py method">
<dt class="sig sig-object py" id="SVTestbenchGenerator.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">top_component_cls</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#SVTestbenchGenerator.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Initialize generator with top-level component.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>top_component_cls</strong> – Zuspec component class for top-level testbench</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="SVTestbenchGenerator.generate">
<span class="sig-name descname"><span class="pre">generate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#SVTestbenchGenerator.generate" title="Link to this definition">¶</a></dt>
<dd><p>Generate all SystemVerilog and Python files.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dictionary mapping filename to file content</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="SVTestbenchGenerator.get_source_filesets">
<span class="sig-name descname"><span class="pre">get_source_filesets</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#SVTestbenchGenerator.get_source_filesets" title="Link to this definition">¶</a></dt>
<dd><p>Get source filesets from all Extern components.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>List of AnnotationFileSet objects</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="zuspec-be-hdlsim-py-runtime">
<h3>zuspec.be.hdlsim.py_runtime<a class="headerlink" href="#zuspec-be-hdlsim-py-runtime" title="Link to this heading">¶</a></h3>
<p>Python runtime factory for creating testbench proxies.</p>
<dl class="py class">
<dt class="sig sig-object py" id="PyTestbenchFactory">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">PyTestbenchFactory</span></span><a class="headerlink" href="#PyTestbenchFactory" title="Link to this definition">¶</a></dt>
<dd><p>Factory for creating executable Python testbench objects at simulation runtime.</p>
<dl class="py method">
<dt class="sig sig-object py" id="PyTestbenchFactory.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#PyTestbenchFactory.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Initialize factory with <a class="reference external" href="https://fvutils.github.io/pyhdl-if">PyHDL-IF</a> object registry.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="PyTestbenchFactory.create">
<span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">component_cls</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inst_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'top'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#PyTestbenchFactory.create" title="Link to this definition">¶</a></dt>
<dd><p>Create executable instance of component class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>component_cls</strong> – Zuspec component class</p></li>
<li><p><strong>inst_path</strong> – Hierarchical instance path</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Proxy object with connections to SV components</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="zuspec-be-hdlsim-checker">
<h3>zuspec.be.hdlsim.checker<a class="headerlink" href="#zuspec-be-hdlsim-checker" title="Link to this heading">¶</a></h3>
<p>Profile validation and checking.</p>
<dl class="py class">
<dt class="sig sig-object py" id="HDLTestbenchChecker">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">HDLTestbenchChecker</span></span><a class="headerlink" href="#HDLTestbenchChecker" title="Link to this definition">¶</a></dt>
<dd><p>Validates HDLTestbench profile rules for domain separation.</p>
<dl class="py method">
<dt class="sig sig-object py" id="HDLTestbenchChecker.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#HDLTestbenchChecker.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Initialize checker with empty error list.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="HDLTestbenchChecker.check_component">
<span class="sig-name descname"><span class="pre">check_component</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">comp</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#HDLTestbenchChecker.check_component" title="Link to this definition">¶</a></dt>
<dd><p>Check a component definition against profile rules.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>comp</strong> – Component class to validate</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="HDLTestbenchChecker.get_errors">
<span class="sig-name descname"><span class="pre">get_errors</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#HDLTestbenchChecker.get_errors" title="Link to this definition">¶</a></dt>
<dd><p>Get list of validation errors found.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>List of error messages</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="HDLTestbenchChecker.has_errors">
<span class="sig-name descname"><span class="pre">has_errors</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#HDLTestbenchChecker.has_errors" title="Link to this definition">¶</a></dt>
<dd><p>Check if any validation errors were found.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if errors exist</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="zuspec-be-hdlsim-profile">
<h3>zuspec.be.hdlsim.profile<a class="headerlink" href="#zuspec-be-hdlsim-profile" title="Link to this heading">¶</a></h3>
<p>Profile definition for HDL testbenches.</p>
<dl class="py data">
<dt class="sig sig-object py" id="HDLTestbenchProfile">
<span class="sig-name descname"><span class="pre">HDLTestbenchProfile</span></span><a class="headerlink" href="#HDLTestbenchProfile" title="Link to this definition">¶</a></dt>
<dd><p>Singleton profile instance for HDL testbench components.</p>
<dl class="py method">
<dt class="sig sig-object py" id="get_checker">
<span class="sig-name descname"><span class="pre">get_checker</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#get_checker" title="Link to this definition">¶</a></dt>
<dd><p>Return the HDLTestbenchChecker for this profile.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>HDLTestbenchChecker instance</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="zuspec-be-hdlsim-json-api-gen">
<h3>zuspec.be.hdlsim.json_api_gen<a class="headerlink" href="#zuspec-be-hdlsim-json-api-gen" title="Link to this heading">¶</a></h3>
<p><a class="reference external" href="https://fvutils.github.io/pyhdl-if">PyHDL-IF</a> API generation.</p>
<dl class="py class">
<dt class="sig sig-object py" id="TransactorJsonApiGenerator">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">TransactorJsonApiGenerator</span></span><a class="headerlink" href="#TransactorJsonApiGenerator" title="Link to this definition">¶</a></dt>
<dd><p>Generate <a class="reference external" href="https://fvutils.github.io/pyhdl-if">PyHDL-IF</a> JSON API definitions from XtorComponent classes.</p>
<dl class="py method">
<dt class="sig sig-object py" id="TransactorJsonApiGenerator.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xtor_cls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">module_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'generated_api'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#TransactorJsonApiGenerator.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Initialize generator.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xtor_cls</strong> – XtorComponent class</p></li>
<li><p><strong>module_name</strong> – Module name for generated API</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="TransactorJsonApiGenerator.generate">
<span class="sig-name descname"><span class="pre">generate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#TransactorJsonApiGenerator.generate" title="Link to this definition">¶</a></dt>
<dd><p>Generate JSON API definition conforming to pyhdl-if.schema.json.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dictionary suitable for JSON serialization</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="zuspec-be-hdlsim-dfm-gen-tb">
<h3>zuspec.be.hdlsim.dfm.gen_tb<a class="headerlink" href="#zuspec-be-hdlsim-dfm-gen-tb" title="Link to this heading">¶</a></h3>
<p><a class="reference external" href="https://dv-flow.github.io">DV Flow Manager</a> integration.</p>
<dl class="py class">
<dt class="sig sig-object py" id="GenTB">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">GenTB</span></span><a class="headerlink" href="#GenTB" title="Link to this definition">¶</a></dt>
<dd><p><a class="reference external" href="https://dv-flow.github.io">DFM</a> task for generating HDL testbench from Zuspec component.</p>
<dl class="py method">
<dt class="sig sig-object py" id="GenTB.run">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ctxt</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TaskDataResult</span></span></span><a class="headerlink" href="#GenTB.run" title="Link to this definition">¶</a></dt>
<dd><p>Execute the testbench generation task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ctxt</strong> – Task context with rundir, params, log</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>TaskDataResult with status and output files</p>
</dd>
</dl>
</dd></dl>

<p><strong>Task Parameters</strong>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">class_name</span></code> (required): Fully qualified testbench class name</p></li>
</ul>
<p><strong>Task Outputs</strong>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sv_files</span></code>: List of generated SystemVerilog files</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">py_files</span></code>: List of generated Python files</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">filesets</span></code>: Ordered compilation fileset</p></li>
</ul>
</dd></dl>

</section>
</section>
<section id="type-definitions">
<h2>Type Definitions<a class="headerlink" href="#type-definitions" title="Link to this heading">¶</a></h2>
<section id="protocols">
<h3>Protocols<a class="headerlink" href="#protocols" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="Extern">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Extern</span></span><a class="headerlink" href="#Extern" title="Link to this definition">¶</a></dt>
<dd><p>Protocol marker for external HDL components.</p>
<p>Components inheriting from Extern are expected to provide SystemVerilog
source files via <code class="docutils literal notranslate"><span class="pre">&#64;annotation_fileset</span></code> decorator.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="XtorComponent">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">XtorComponent</span></span><span class="sig-paren">[</span><em class="sig-param"><span class="n"><span class="pre">ProtocolT</span></span></em><span class="sig-paren">]</span><a class="headerlink" href="#XtorComponent" title="Link to this definition">¶</a></dt>
<dd><p>Generic base for transactor components.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ProtocolT</strong> – Protocol class defining transaction-level API</p>
</dd>
</dl>
<p>Transactors generate both SystemVerilog implementation and Python API wrapper.</p>
</dd></dl>

</section>
<section id="annotations">
<h3>Annotations<a class="headerlink" href="#annotations" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="annotation_fileset">
<span class="sig-prename descclassname"><span class="pre">&#64;</span></span><span class="sig-name descname"><span class="pre">annotation_fileset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sources</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">incdirs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">defines</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#annotation_fileset" title="Link to this definition">¶</a></dt>
<dd><p>Annotate component with HDL source file information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sources</strong> – List of source file paths (relative or absolute)</p></li>
<li><p><strong>incdirs</strong> – Optional list of include directories</p></li>
<li><p><strong>defines</strong> – Optional dictionary of preprocessor defines</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@annotation_fileset</span><span class="p">(</span>
    <span class="n">sources</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;rtl/dut.sv&quot;</span><span class="p">,</span> <span class="s2">&quot;rtl/dut_pkg.sv&quot;</span><span class="p">],</span>
    <span class="n">incdirs</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;rtl/include&quot;</span><span class="p">],</span>
    <span class="n">defines</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;DEBUG&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">}</span>
<span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Link to this heading">¶</a></h2>
<section id="basic-testbench">
<h3>Basic Testbench<a class="headerlink" href="#basic-testbench" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">zuspec.dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span><span class="p">,</span> <span class="n">Component</span><span class="p">,</span> <span class="n">Signal</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">zuspec.dataclasses.protocols</span><span class="w"> </span><span class="kn">import</span> <span class="n">Extern</span><span class="p">,</span> <span class="n">XtorComponent</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">zuspec.be.hdlsim</span><span class="w"> </span><span class="kn">import</span> <span class="n">HDLSimRuntime</span>

<span class="c1"># Define protocol</span>
<span class="k">class</span><span class="w"> </span><span class="nc">MyProtocol</span><span class="p">:</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span> <span class="o">...</span>

<span class="c1"># Define components</span>
<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">DUT</span><span class="p">(</span><span class="n">Component</span><span class="p">,</span> <span class="n">Extern</span><span class="p">):</span>
    <span class="n">clock</span><span class="p">:</span> <span class="n">Signal</span> <span class="o">=</span> <span class="n">zdc</span><span class="o">.</span><span class="n">input</span><span class="p">()</span>

    <span class="nd">@annotation_fileset</span><span class="p">(</span><span class="n">sources</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;dut.sv&quot;</span><span class="p">])</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>

<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Driver</span><span class="p">(</span><span class="n">XtorComponent</span><span class="p">[</span><span class="n">MyProtocol</span><span class="p">]):</span>
    <span class="n">clock</span><span class="p">:</span> <span class="n">Signal</span> <span class="o">=</span> <span class="n">zdc</span><span class="o">.</span><span class="n">input</span><span class="p">()</span>
    <span class="n">data_out</span><span class="p">:</span> <span class="n">Signal</span> <span class="o">=</span> <span class="n">zdc</span><span class="o">.</span><span class="n">output</span><span class="p">()</span>

<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TB</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="n">dut</span><span class="p">:</span> <span class="n">DUT</span> <span class="o">=</span> <span class="n">zdc</span><span class="o">.</span><span class="n">inst</span><span class="p">()</span>
    <span class="n">drv</span><span class="p">:</span> <span class="n">Driver</span> <span class="o">=</span> <span class="n">zdc</span><span class="o">.</span><span class="n">inst</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__bind__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">drv</span><span class="o">.</span><span class="n">clock</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dut</span><span class="o">.</span><span class="n">clock</span><span class="p">),</span>
            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">drv</span><span class="o">.</span><span class="n">data_out</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dut</span><span class="o">.</span><span class="n">data_in</span><span class="p">),</span>
        <span class="p">)</span>
</pre></div>
</div>
</section>
<section id="profile-checking">
<h3>Profile Checking<a class="headerlink" href="#profile-checking" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">zuspec.be.hdlsim.checker</span><span class="w"> </span><span class="kn">import</span> <span class="n">HDLTestbenchChecker</span>

<span class="c1"># Create and run checker</span>
<span class="n">checker</span> <span class="o">=</span> <span class="n">HDLTestbenchChecker</span><span class="p">()</span>
<span class="n">checker</span><span class="o">.</span><span class="n">check_component</span><span class="p">(</span><span class="n">TB</span><span class="p">)</span>

<span class="c1"># Handle errors</span>
<span class="k">if</span> <span class="n">checker</span><span class="o">.</span><span class="n">has_errors</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">error</span> <span class="ow">in</span> <span class="n">checker</span><span class="o">.</span><span class="n">get_errors</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Validation error: </span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="sv-generation">
<h3>SV Generation<a class="headerlink" href="#sv-generation" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">zuspec.be.hdlsim.sv_generator</span><span class="w"> </span><span class="kn">import</span> <span class="n">SVTestbenchGenerator</span>

<span class="c1"># Generate files</span>
<span class="n">gen</span> <span class="o">=</span> <span class="n">SVTestbenchGenerator</span><span class="p">(</span><span class="n">TB</span><span class="p">)</span>
<span class="n">files</span> <span class="o">=</span> <span class="n">gen</span><span class="o">.</span><span class="n">generate</span><span class="p">()</span>

<span class="c1"># Write to disk</span>
<span class="k">for</span> <span class="n">filename</span><span class="p">,</span> <span class="n">content</span> <span class="ow">in</span> <span class="n">files</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;generated/</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="quickstart.html"><span class="doc">Quick Start</span></a> - Getting started guide</p></li>
<li><p><a class="reference internal" href="components.html"><span class="doc">Components</span></a> - Component types and usage</p></li>
<li><p><a class="reference internal" href="examples.html"><span class="doc">Examples</span></a> - More detailed examples</p></li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Zuspec Backend HDLSim</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="components.html">Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="dfm_integration.html">DV Flow Manager Integration</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#core-modules">Core Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#type-definitions">Type Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="dfm_integration.html" title="previous chapter">DV Flow Manager Integration</a></li>
      <li>Next: <a href="examples.html" title="next chapter">Examples</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2025-2026, Matthew Ballance.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/api_reference.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>